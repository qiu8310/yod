<html>
  <head>
    <title>Online Object Data Generator —— YOD </title>
    <meta name="description" content="The online object data generator, fantasy data generator experiences. source code on [yod](https://github.com/qiu8310/yod)"/>
    <meta name="keywords" content="yod, mock, data, generator, online"/>
    <meta name="author" content="Zhonglei Qiu"/>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" href="stylesheets/normalize.css">
    <link rel="stylesheet" href="stylesheets/styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <style>

    </style>
  </head>

  <body>

  <div id="header">
    <nav>
      <li id="title"><h1>Yod</h1><p>Fantasy data generator.</p></li>
      <li class="downloads last"><a href="https://github.com/qiu8310/yod/tarball/master">TAR</a></li>
      <li class="downloads"><a href="https://github.com/qiu8310/yod/zipball/master">ZIP</a></li>
      <li class="fork"><a href="https://github.com/qiu8310/yod">View On GitHub</a></li>
    </nav>
  </div><!-- end header -->

    <div id="container">
      <div id="editor">
// Generate random data from a object
var mocked = yod({
  "a": "a",
  "n": 3,
  "child": {
    "ca": "c @Parent.a",
    "cb": "@Self.ca@Self.ca"
  },
  "modifier": "@Self.a.replace('a', 'hack')",
  "execScript": "` 2 + 1 `",
  "@Self.child.ca": "hack object key"
});

console.log(mocked);

// Create custom type -- User
yod.type('User', {
  name: 'David',
  age: 20,
  hello: 'Hello @Self.name'
});

// Generate random data from custom type
console.log(yod('@User'));

// Create a modifier -- repeat
yod.modifier(':repeat', function(genFn, len) {

  var length =  len || yod._.random(1, 10);

  return yod._.times(length, genFn);

});


// Use modifier on type
console.log(yod('@User.repeat(3)'));
      </div>
      <div id="out"></div>
    </div>

    <script src="yod.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="http://cdn.staticfile.org/ace/1.1.3/ace.js" type="text/javascript" charset="utf-8"></script>
    <script>
      var _ = yod._;

      var editor = ace.edit("editor");
      editor.setTheme("ace/theme/monokai");
      editor.getSession().setMode("ace/mode/javascript");

      var out = ace.edit("out");
      out.getSession().setMode("ace/mode/javascript");
      out.setReadOnly(true);

      var strip = '\r\n\r\n//====================  Separator =====================//\r\n\r\n';
      function appendOut(str) {
        var bef = out.getValue();
        out.setValue(bef + (bef !== '' ? strip : '') + str);
        out.gotoLine(out.session.getLength());
      }

      function build() {
        try {
          var source = editor.getValue();
          out.setValue('');
          eval(source);
        } catch (e) {
          appendOut(e.stack);
        }
      }

      var old = console.log;
      console.log = function() {
        old.apply(console, arguments);
        _.each(_.slice(arguments), function(arg) {
          appendOut(JSON.stringify(arg, null, 2));
        });
      };

      build();
      editor.getSession().on('change', yod._.debounce(build, 1500));
    </script>
  </body>
</html>